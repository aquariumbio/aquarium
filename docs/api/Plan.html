<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Plan
  
    &mdash; Aquarium Documentation
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Plan";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">Plan</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Plan
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Plan</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="DataAssociator.html" title="DataAssociator (module)">DataAssociator</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/plan.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#costs-instance_method" title="#costs (instance method)">#<strong>costs</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error-instance_method" title="#error (instance method)">#<strong>error</strong>(msg, key = :job_crash)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#goals-instance_method" title="#goals (instance method)">#<strong>goals</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#goals_plain-instance_method" title="#goals_plain (instance method)">#<strong>goals_plain</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#relaunch-instance_method" title="#relaunch (instance method)">#<strong>relaunch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove-instance_method" title="#remove (instance method)">#<strong>remove</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select_subtree-instance_method" title="#select_subtree (instance method)">#<strong>select_subtree</strong>(operation)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def status   s = “Under Construction”   goals_plain.each do |g|     if
g.status != “planning”       s = “Running”     end   end   s end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wires-instance_method" title="#wires (instance method)">#<strong>wires</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>end.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="DataAssociator.html" title="DataAssociator (module)">DataAssociator</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="DataAssociator.html#append_notes-instance_method" title="DataAssociator#append_notes (method)">#append_notes</a></span>, <span class='object_link'><a href="DataAssociator.html#associate-instance_method" title="DataAssociator#associate (method)">#associate</a></span>, <span class='object_link'><a href="DataAssociator.html#associations-instance_method" title="DataAssociator#associations (method)">#associations</a></span>, <span class='object_link'><a href="DataAssociator.html#data_associations-instance_method" title="DataAssociator#data_associations (method)">#data_associations</a></span>, <span class='object_link'><a href="DataAssociator.html#get-instance_method" title="DataAssociator#get (method)">#get</a></span>, <span class='object_link'><a href="DataAssociator.html#get_association-instance_method" title="DataAssociator#get_association (method)">#get_association</a></span>, <span class='object_link'><a href="DataAssociator.html#modify-instance_method" title="DataAssociator#modify (method)">#modify</a></span>, <span class='object_link'><a href="DataAssociator.html#notes-instance_method" title="DataAssociator#notes (method)">#notes</a></span>, <span class='object_link'><a href="DataAssociator.html#notes=-instance_method" title="DataAssociator#notes= (method)">#notes=</a></span>, <span class='object_link'><a href="DataAssociator.html#upload-instance_method" title="DataAssociator#upload (method)">#upload</a></span></p>

  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="costs-instance_method">
  
    #<strong>costs</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_costs'>costs</span>

  <span class='id identifier rubyid_labor_rate'>labor_rate</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parameter.html" title="Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_float'><span class='object_link'><a href="Parameter.html#get_float-class_method" title="Parameter.get_float (method)">get_float</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>labor rate</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> 
  <span class='id identifier rubyid_markup_rate'>markup_rate</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parameter.html" title="Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_float'><span class='object_link'><a href="Parameter.html#get_float-class_method" title="Parameter.get_float (method)">get_float</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markup rate</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_op_ids'>op_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="PlanAssociation.html" title="PlanAssociation (class)">PlanAssociation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>plan_id:</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pa'>pa</span><span class='op'>|</span> <span class='id identifier rubyid_pa'>pa</span><span class='period'>.</span><span class='id identifier rubyid_operation_id'>operation_id</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_ops'>ops</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Operation.html" title="Operation (class)">Operation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:operation_type</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_op_ids'>op_ids</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_ops'>ops</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>

    <span class='kw'>begin</span>
      <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_nominal_cost'>nominal_cost</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>labor_rate:</span> <span class='id identifier rubyid_labor_rate'>labor_rate</span><span class='comma'>,</span> <span class='label'>markup_rate:</span> <span class='id identifier rubyid_markup_rate'>markup_rate</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span> 

    <span class='id identifier rubyid_c'>c</span> 

  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="error-instance_method">
  
    #<strong>error</strong>(msg, key = :job_crash)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41
42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='op'>=</span><span class='symbol'>:job_crash</span>

  <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>done</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_associate'>associate</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="goals-instance_method">
  
    #<strong>goals</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_goals'>goals</span>
  <span class='comment'># TODO: Make this faster. Note, fvs doesn&#39;t work, so will probably need to be some kind of SQL query.
</span>  <span class='id identifier rubyid_goals_plain'>goals_plain</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span><span class='lparen'>(</span><span class='label'>include:</span> <span class='symbol'>:operation_type</span><span class='comma'>,</span> <span class='label'>methods:</span> <span class='symbol'>:field_values</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="goals_plain-instance_method">
  
    #<strong>goals_plain</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_goals_plain'>goals_plain</span>
  <span class='comment'># TODO: Make this faster. 
</span>  <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_successors'>successors</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relaunch-instance_method">
  
    #<strong>relaunch</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relaunch'>relaunch</span>

  <span class='id identifier rubyid_fv_maps'>fv_maps</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># Make new plan
</span>  <span class='id identifier rubyid_newplan'>newplan</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Plan (class)">Plan</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='label'>budget_id:</span> <span class='id identifier rubyid_budget_id'>budget_id</span>
  <span class='id identifier rubyid_newplan'>newplan</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

  <span class='comment'># Make new operations from old ones
</span>  <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>
    <span class='id identifier rubyid_newop'>newop</span> <span class='op'>=</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_operation_type'>operation_type</span><span class='period'>.</span><span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span> <span class='label'>status:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>planning</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_user_id'>user_id</span>
    <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_field_values'>field_values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fv'>fv</span><span class='op'>|</span>
      <span class='id identifier rubyid_newfv'>newfv</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FieldValue.html" title="FieldValue (class)">FieldValue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span>
        <span class='label'>name:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
        <span class='label'>child_sample_id:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_child_sample_id'>child_sample_id</span><span class='comma'>,</span>
        <span class='label'>value:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span>
        <span class='label'>role:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='comma'>,</span>
        <span class='label'>field_type_id:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_field_type_id'>field_type_id</span><span class='comma'>,</span>
        <span class='label'>allowable_field_type_id:</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_allowable_field_type_id'>allowable_field_type_id</span><span class='comma'>,</span>
        <span class='label'>parent_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Operation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>parent_id:</span> <span class='id identifier rubyid_newop'>newop</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_newfv'>newfv</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_fv_maps'>fv_maps</span><span class='lbracket'>[</span><span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_newfv'>newfv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_newplan'>newplan</span><span class='period'>.</span><span class='id identifier rubyid_plan_associations'>plan_associations</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span> <span class='label'>operation_id:</span> <span class='id identifier rubyid_newop'>newop</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_wires'>wires</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_wire'>wire</span><span class='op'>|</span>
    <span class='id identifier rubyid_newwire'>newwire</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Wire.html" title="Wire (class)">Wire</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>from_id:</span> <span class='id identifier rubyid_fv_maps'>fv_maps</span><span class='lbracket'>[</span><span class='id identifier rubyid_wire'>wire</span><span class='period'>.</span><span class='id identifier rubyid_from_id'>from_id</span><span class='rbracket'>]</span> <span class='comma'>,</span> <span class='label'>to_id:</span> <span class='id identifier rubyid_fv_maps'>fv_maps</span><span class='lbracket'>[</span><span class='id identifier rubyid_wire'>wire</span><span class='period'>.</span><span class='id identifier rubyid_to_id'>to_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_newwire'>newwire</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_newplan'>newplan</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove-instance_method">
  
    #<strong>remove</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove'>remove</span>

  <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>

    <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_field_values'>field_values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fv'>fv</span><span class='op'>|</span>
      <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_wires_as_dest'>wires_as_dest</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deleteing wire </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_wires_as_source'>wires_as_source</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deleting wire </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
      <span class='kw'>end</span>       
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deleted fv </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destroying operation </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destroying plan </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select_subtree-instance_method">
  
    #<strong>select_subtree</strong>(operation)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def status</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Under Construction</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_goals_plain'>goals_plain</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_g'>g</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>planning</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Running</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_s'>s</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_subtree'>select_subtree</span> <span class='id identifier rubyid_operation'>operation</span>

  <span class='id identifier rubyid_operation'>operation</span><span class='period'>.</span><span class='id identifier rubyid_siblings'>siblings</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_op'>op</span> <span class='op'>==</span> <span class='id identifier rubyid_operation'>operation</span>
      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_activate'>activate</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_deactivate'>deactivate</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start-instance_method">
  
    #<strong>start</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span>

  <span class='id identifier rubyid_gs'>gs</span> <span class='op'>=</span> <span class='id identifier rubyid_goals_plain'>goals_plain</span>

  <span class='id identifier rubyid_issues'>issues</span> <span class='op'>=</span> <span class='id identifier rubyid_gs'>gs</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_g'>g</span><span class='op'>|</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_issues'>issues</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span>

      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>
      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user_id'>user_id</span>
      <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

    <span class='kw'>end</span>

  <span class='kw'>else</span>

    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Plan has issues: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_issues'>issues</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:start_plan</span><span class='comma'>,</span> <span class='id identifier rubyid_issues'>issues</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wires-instance_method">
  
    #<strong>wires</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/plan.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wires'>wires</span>

  <span class='id identifier rubyid_fvs'>fvs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_op_ids'>op_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_operations'>operations</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_op'>op</span><span class='op'>|</span> <span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="FieldValue.html" title="FieldValue (class)">FieldValue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>parent_class:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Operation</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>parent_id:</span> <span class='id identifier rubyid_op_ids'>op_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fv'>fv</span><span class='op'>|</span>
    <span class='id identifier rubyid_fvs'>fvs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_fv'>fv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="Wire.html" title="Wire (class)">Wire</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>from_id:</span> <span class='id identifier rubyid_fvs'>fvs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>to_id:</span> <span class='id identifier rubyid_fvs'>fvs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Oct  9 13:38:41 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.2.0).
</div>

    </div>
  </body>
</html>